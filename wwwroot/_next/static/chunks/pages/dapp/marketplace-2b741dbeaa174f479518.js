_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[49],{"4PpA":function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return W}));var n=a("nKUr"),r=a("vOnD"),o=a("q1tI"),c=a("ikIT"),s=a("gku/"),l=a("vJKn"),i=a.n(l),u=a("rg98"),d=a("6bZP"),p=a("Vvt1"),m=a.n(p),b=a("eLn5"),f=a("W+Km"),h=a("sEcA"),g=a("20a2"),k=a("kTJ0"),x=m()((function(){return Promise.all([a.e(12),a.e(11)]).then(a.bind(null,"XrMt"))}),{suspense:!0,loadableGenerated:{webpack:function(){return["XrMt"]},modules:["../presentation/layouts/dapp/marketplace/index.js -> @/presentation/layouts/dapp/my-characters/wallets"]}}),w=m()((function(){return Promise.all([a.e(8),a.e(12),a.e(16),a.e(23),a.e(67)]).then(a.bind(null,"/Nu/"))}),{suspense:!0,loadableGenerated:{webpack:function(){return["/Nu/"]},modules:["../presentation/layouts/dapp/marketplace/index.js -> @/presentation/components/MarketChar"]}}),v=m()((function(){return Promise.all([a.e(8),a.e(14),a.e(12),a.e(16),a.e(66)]).then(a.bind(null,"aS4a"))}),{suspense:!0,loadableGenerated:{webpack:function(){return["aS4a"]},modules:["../presentation/layouts/dapp/marketplace/index.js -> @/presentation/components/InfantChar"]}}),j=m()((function(){return Promise.all([a.e(11),a.e(25)]).then(a.bind(null,"CF3u"))}),{suspense:!0,loadableGenerated:{webpack:function(){return["CF3u"]},modules:["../presentation/layouts/dapp/marketplace/index.js -> @/presentation/components/Pagination"]}}),y=Object(r.b)(j).withConfig({displayName:"marketplace___StyledPagination",componentId:"sc-328bbc-0"})({width:"auto"}),C=m()((function(){return Promise.all([a.e(26),a.e(11)]).then(a.bind(null,"vGTJ"))}),{suspense:!0,loadableGenerated:{webpack:function(){return["vGTJ"]},modules:["../presentation/layouts/dapp/marketplace/index.js -> @/presentation/layouts/dapp/marketplace/MarketplaceFilter"]}}),_=m()((function(){return Promise.all([a.e(8),a.e(24)]).then(a.bind(null,"/NWu"))}),{suspense:!0,loadableGenerated:{webpack:function(){return["/NWu"]},modules:["../presentation/layouts/dapp/marketplace/index.js -> @/presentation/layouts/Loading"]}}),D=m()((function(){return Promise.all([a.e(21),a.e(30)]).then(a.bind(null,"jxDC"))}),{suspense:!0,loadableGenerated:{webpack:function(){return["jxDC"]},modules:["../presentation/layouts/dapp/marketplace/index.js -> @/presentation/layouts/Gleam"]}});function O(){var e=Object(g.useRouter)(),t=e.query,a=t.page,r=t.orderBy,s=t.filterBy,l=t.school,p=t.gender,m=t.chaClass,j=t.alumni,O=Object(c.a)(),W=Object(d.c)(),P=W.ctxContracts,B=W.ctxWeb3,E=W.alert,G=W.getBalances,M=(W.isCorrectNetwork,Object(o.useState)(null)),L=M[0],J=M[1],R=Object(k.e)("newest"),X=Object(k.e)("all"),A=Object(k.e)("all"),F=Object(k.e)("all"),K=Object(k.e)("all"),$=Object(k.e)(!1),q="/?page=1&orderBy=newest&filterBy=all&school=all&gender=all&chaClass=all&alumni=false",z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"/?page=".concat(e||a,"&orderBy=").concat(R.value,"&filterBy=").concat(X.value,"&school=").concat(A.value,"&gender=").concat(F.value,"&chaClass=").concat(K.value,"&alumni=").concat($.value?$.value:"")};Object(o.useEffect)((function(){R.set(r),X.set(s),A.set(l),F.set(p),K.set(m),$.set("true"===j)}),[e]),Object(o.useEffect)((function(){Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P||!O.isCorrectNetwork.value){e.next=5;break}return e.next=3,H(a&&z());case 3:return e.next=5,G();case 5:case"end":return e.stop()}}),e)})))()}),[P,R.value,X.value,a,A.value,F.value,K.value,$.value]);var H=function(){var e=Object(u.a)(i.a.mark((function e(){var t,a,n,r,o=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:q,e.prev=1,e.next=4,f.J.get(f.n+t+"&address=".concat(O.connectedWallet.value)).then((function(e){return e.data.data}));case 4:return a=e.sent,n=[],a.data.forEach((function(e){n.push(e.token_id)})),e.next=9,P.fetcher.methods.getCharactersBulk(n).call();case 9:r=e.sent,J({charData:r,marketData:a}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),E.error(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(u.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(1e3*Number(L.marketData.data[n].transferCooldown)>Date.now())){e.next=4;break}return E.error("Transfer Cooldown"),e.abrupt("return");case 4:return e.next=6,P.marketplace.methods.delistMarketItem(O.blockchain.rxc_characters_address.get(),t.toString()).send({from:O.connectedWallet.value});case 6:E.success("Character has been delisted"),O.reloadCharData.set(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),E.error(e.t0.message);case 13:return e.prev=13,e.next=16,H(a&&z());case 16:return e.next=18,G();case 18:return e.finish(13);case 19:case"end":return e.stop()}}),e,null,[[0,10,13,19]])})));return function(t,a){return e.apply(this,arguments)}}(),V=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=parseInt(B.utils.fromWei(O.balance.rxc.value.toString(),"gwei")),!(parseInt(B.utils.fromWei(n.toString(),"gwei"))>r)){e.next=6;break}return E.error("Insufficient $RXC balance"),e.abrupt("return");case 6:return e.next=8,P.token.methods.allowance(O.connectedWallet.value,O.blockchain.rxc_marketplace_address.value).call();case 8:if(o=e.sent,0!==Number(o)){e.next=12;break}return e.next=12,P.token.methods.approve(O.blockchain.rxc_marketplace_address.get(),"".concat(1e9*Math.pow(10,9))).send({from:O.connectedWallet.value});case 12:return e.next=14,P.marketplace.methods.createMarketSale(O.blockchain.rxc_characters_address.get(),t.toString()).send({from:O.connectedWallet.value,value:"0"});case 14:E.success("Character has been purchased!"),O.reloadCharData.set(!0),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),E.error(e.t0.message);case 21:return e.prev=21,e.next=24,H(a&&z());case 24:return e.next=26,G();case 26:return e.finish(21);case 27:case"end":return e.stop()}}),e,null,[[0,18,21,27]])})));return function(t,a){return e.apply(this,arguments)}}();return L?Object(n.jsxs)(S,{children:[Object(n.jsx)(N,{children:"Marketplace"}),O.userData.value&&B&&Object(n.jsx)(x,{bnb:B.utils.fromWei(O.balance.bnb.value.toString(),"ether").toString(),rxc:B.utils.fromWei(O.balance.rxc.value.toString(),"gwei").toString(),dna:B.utils.fromWei(O.balance.dna.value.toString(),"gwei").toString()}),Object(n.jsx)(D,{}),L&&0===L.charData.length&&Object(n.jsx)(I,{children:"There are no characters posted in the marketplace as of this moment."}),Object(n.jsx)(T,{$_css:[{paddingTop:"2rem",paddingBottom:"2rem",display:"grid",gridTemplateColumns:"repeat(1, minmax(0, 1fr))",gap:"1rem",width:"83.333333%"},L&&{"@media (min-width: 640px)":{gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"0.5rem"},"@media (min-width: 768px)":{gridTemplateColumns:"repeat(3, minmax(0, 1fr))",width:"auto"},"@media (min-width: 1024px)":{gridTemplateColumns:"repeat(4, minmax(0, 1fr))"}}],children:L&&B&&L.charData.length>0&&L.charData.map((function(e,t){var a=b.c.includes(parseInt(e.chaClass))?"M":"F",r=1e3*Number(e.bornTimeStamp)>Date.now(),o=new Date(1e3*Number(e.bornTimeStamp)).toLocaleString(),c=1e3*e.transferCooldown>=Date.now()?new Date(1e3*e.transferCooldown).toLocaleString():"",s=new Date(1e3*Number(e.transferCooldown)).toLocaleString(),l=1===L.marketData.data[t].status,i=2===L.marketData.data[t].status,u=B.utils.fromWei(Number(L.marketData.data[t].price).toString(),"gwei"),d=new Date(1e3*L.marketData.data[t].date_posted).toLocaleString(),p=L.marketData.data[t].seller.toLowerCase()==O.connectedWallet.value.toLowerCase(),m=h.b.getName(e.tokenId),f=h.b.getClassImg(e),g=h.b.getClassName(e),k=L.marketData.data[t],x=function(){return V(L.marketData.data[t].item_id,L.marketData.data[t].price)},j=function(){return U(L.marketData.data[t].item_id,t)};return Object(n.jsx)("div",{children:r?Object(n.jsx)(v,{from:"marketplace",sex:a,school:e.chaSchool,type:g,image:f,name:m,breedCount:e.breedCount,rxcCost:u,infantCD:o,tokenId:e.tokenId,isTransferCd:c,transferCD:s,date:d,isSold:l,isCancelled:i,isSeller:p,marketDetails:k,onBuy:x,onDelist:j}):Object(n.jsx)(w,{from:"marketplace",tokenId:e.tokenId,school:e.chaSchool,type:g,sex:a,image:f,name:m,breedCount:e.breedCount,bonusStat:e.chaStRemain,rxcCost:u,date:d,isSold:l,isCancelled:i,isSeller:p,marketDetails:k,onBuy:x,onDelist:j})},t)}))}),L&&L.charData.length>0&&Object(n.jsx)(y,{meta:L.marketData.meta,page:a,onPrev:function(){var t=L.marketData.meta.previous_page_url;t&&e.push("/dapp/marketplace".concat(z(t.split("=")[1])))},onNext:function(){var t=L.marketData.meta.next_page_url;t&&e.push("/dapp/marketplace".concat(z(t.split("=")[1])))},onPageEnter:function(t){e.push("/dapp/marketplace".concat(z(t)))}}),Object(n.jsx)(C,{from:"marketplace",orderBy:R,filterBy:X,school:A,gender:F,charClass:K,alumni:$,onClear:function(){e.push("/dapp/marketplace".concat(q))},onChange:function(){e.push("/dapp/marketplace".concat(z()))}})]}):Object(n.jsx)(_,{})}r.b.div.withConfig({displayName:"marketplace__Card",componentId:"sc-328bbc-1"})({"--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",borderWidth:"2px","--tw-border-opacity":"1",borderColor:"rgba(94, 97, 155, var(--tw-border-opacity))",borderRadius:"0.75rem","--tw-bg-opacity":"1",backgroundColor:"rgba(42, 47, 76, var(--tw-bg-opacity))"}),r.b.button.withConfig({displayName:"marketplace__PageBtn",componentId:"sc-328bbc-2"})({":active":{transform:"var(--tw-transform)","--tw-scale-x":".9","--tw-scale-y":".9"},"--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",textTransform:"uppercase",userSelect:"none",fontWeight:"500",paddingTop:"0.5rem",paddingBottom:"0.5rem",paddingLeft:"1.5rem",paddingRight:"1.5rem",borderRadius:"0.375rem",borderWidth:"1px","--tw-shadow":"0 1px 2px 0 rgba(0, 0, 0, 0.05)",boxShadow:"var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)",":focus":{outline:"2px solid transparent",outlineOffset:"2px"}});var S=Object(r.b)("main").withConfig({displayName:"marketplace___StyledMain",componentId:"sc-328bbc-3"})({"--tw-bg-opacity":"1",backgroundColor:"rgba(1, 4, 23, var(--tw-bg-opacity))",flex:"1 1 0%",display:"flex",flexDirection:"column",alignItems:"center"}),N=Object(r.b)("div").withConfig({displayName:"marketplace___StyledDiv",componentId:"sc-328bbc-4"})({"--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",fontWeight:"700",paddingTop:"3rem",paddingBottom:"1rem",fontSize:"1.5rem",lineHeight:"2rem",textTransform:"uppercase"}),I=Object(r.b)("div").withConfig({displayName:"marketplace___StyledDiv2",componentId:"sc-328bbc-5"})({"--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",textAlign:"center",width:"100%",marginTop:"2rem"}),T=Object(r.b)("div").withConfig({displayName:"marketplace___StyledDiv3",componentId:"sc-328bbc-6"})(["",""],(function(e){return e.$_css}));function W(){var e=Object(c.a)();return Object(n.jsx)(P,{children:e.blockchain.value&&e.blockchain.maintenance_status.marketplace.value?Object(n.jsx)(s.a,{}):Object(n.jsx)(O,{})})}var P=Object(r.b)("div").withConfig({displayName:"marketplace___StyledDiv",componentId:"sc-1auhna0-0"})({flex:"1 1 0%",display:"flex",flexDirection:"column",justifyContent:"center"})},b6pv:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dapp/marketplace",function(){return a("4PpA")}])}},[["b6pv",1,0,7,2,3,4,5,6,10,18,29]]]);